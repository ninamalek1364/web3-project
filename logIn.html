<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>form validation</title>
        <link rel="stylesheet" href="style.css" />
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
            integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
        />
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
            crossorigin="anonymous"
        />

        <link
            href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@1,300&family=Vazirmatn:wght@500&display=swap"
            rel="stylesheet"
        />
    </head>
    <style>
        header {
            display: flex;
            z-index: 100000px;
        }
    </style>
    <body>
        <header>
            <nav class="navbar navbar-expand-lg navbar-dark bg-dark w-100">
                <div class="container-fluid">
                    <a href="#" class="logo">
                        <img src="coffee img/PHOTO-2024-01-20-13-57-28.jpg" alt="" />
                    </a>
                    <div class="logIn">
                        <a href="logIn.html" id="logIn"><i class="fa-solid fa-user"></i></a>
                    </div>
                    <div class="icon-cart fs-5 mt-1 fs-sm-3">
                        <i class="fa-solid fa-cart-shopping" id="shopingcartBtn"></i>
                        <span class="counter">0</span>
                    </div>
                    <div class="search">
                        <form class="d-flex mx-2">
                            <input
                                class="form-control me-2 w-25-sm w-50-lg"
                                type="search"
                                placeholder="Search..."
                                aria-label="Search"
                            />
                            <button
                                class="search btn btn-outline-light px-4 d-none d-lg-block"
                                onclick="searchItem()"
                                type="submit"
                            >
                                Search
                            </button>
                            <span class="search d-lg-none" onclick="searchItem()"
                                ><i class="fa-solid fa-magnifying-glass"></i
                            ></span>
                        </form>
                    </div>

                    <button
                        id="menu"
                        class="navbar-toggler flex"
                        type="button"
                        data-bs-toggle="collapse"
                        data-bs-target="#navbarSupportedContent"
                        aria-controls="navbarSupportedContent"
                        aria-expanded="false"
                        aria-label="Toggle navigation"
                    >
                        <span class="navbar-toggler-icon d-lg-none"></span>
                    </button>
                    <div class="d-none d-lg-block" id="navbarSupportedContent">
                        <ul class="navbar-nav mb-2 mb-lg-0">
                            <li class="nav-item">
                                <a class="nav-link active" aria-current="page" href="index.html#home">خانه</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="index.html#ABOUTuS">درباره ما</a>
                            </li>

                            <li class="nav-item">
                                <a class="nav-link" href="index.html#our-product">محصولات </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="index.html#contacts">تماس با ما</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
            <!-- sidenav====================================================== -->
            <div id="mySidenav" class="sidenav">
                <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
                <a href="#home" class="sidenav-item m-3">خانه</a>
                <a href="#aboutUs-section" class="sidenav-item m-3">درباره ما</a>
                <a href="#our-product" class="sidenav-item m-3">محصولات</a>
                <a href="#contacts" class="sidenav-item m-3">تماس با ما</a>
            </div>
        </header>

        <!-- form========================================== -->
        <div class="container login-page">
            <div class="leyout">
                <form action="/" id="form">
                    <h2>ورود/عضویت</h2>
                    <div class="input-control">
                        <label for="username">نام </label>
                        <input type="text" id="username" name="username" placeholder=" نام خود را وارد کنید" />
                        <div class="error"><i class="fa-solid fa-xmark"></i></div>
                        <div class="succes"><i class="fa-solid fa-check"></i></div>
                        <small>error mesage</small>
                    </div>
                    <div class="input-control">
                        <label for="email">ایمیل</label>
                        <input type="text" id="email" name="username" placeholder="ایمیل خود را وارد کنید" />
                        <div class="error"><i class="fa-solid fa-xmark"></i></div>
                        <div class="succes"><i class="fa-solid fa-check"></i></div>
                        <small>error mesage</small>
                    </div>
                    <div class="input-control">
                        <label for="password">پسورد</label>
                        <input type="password" id="password" name="password" placeholder="پسورد را وارد کنید" />
                        <div class="error"><i class="fa-solid fa-xmark"></i></div>
                        <div class="succes"><i class="fa-solid fa-check"></i></div>
                        <small></small>
                    </div>
                    <button type="submit" onsubmit="goTo()" id="submit">log In</button>
                </form>
                <div class="userInfo"></div>
            </div>
        </div>
        <div class="test"></div>
        <script src="node_modules/jquery/dist/jquery.min.js"></script>
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
            crossorigin="anonymous"
        ></script>
        <script src="script.js"></script>

        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.js"
            integrity="sha512-AA1Bzp5Q0K1KanKKmvN/4d3IRKVlv9PYgwFPvm32nPO6QS8yH1HO7LbgB1pgiOxPtfeg5zEn2ba64MUcqJx6CA=="
            crossorigin="anonymous"
            referrerpolicy="no-referrer"
        ></script>
        <script src="helper.js"></script>
        <script>
            const form = document.getElementById("form");
            const username = document.getElementById("username");
            const email = document.getElementById("email");
            const password = document.getElementById("password");

            form.addEventListener("submit", (e) => {
                e.preventDefault();
                validateInputs();
            });

            function validateInputs() {
                const usernamevalue = username.value.trim();
                const emailvalue = email.value.trim();
                const passwordvalue = password.value.trim();

                if (usernamevalue === "") {
                    setError(username, "این فیلد پر نشده");
                } else {
                    setSucces(username);
                    setCookie("username", usernamevalue, 365);
                }

                if (emailvalue === "") {
                    setError(email, "این فیلد پر نشده");
                } else if (!isValidEmail(emailvalue)) {
                    setError(email, "آدرس ایمیل به درستی وارد نشده");
                } else {
                    setSucces(email);
                    setCookie("email", emailvalue, 365);
                }

                if (passwordvalue === "") {
                    setError(password, "این فیلد پر نشده");
                } else if (passwordvalue.length < 8) {
                    setError(password, "حداقل 8 کاراکتر وارد کنید");
                } else {
                    setSucces(password);
                    setSucces(email);
                    setCookie("password", passwordvalue, 365);
                }

                goTo();
            }

            function setError(input, message) {
                const inputControl = input.parentElement;
                const errorDisplay = inputControl.querySelector("small");

                errorDisplay.innerText = message;
                inputControl.classList = "input-control error";
            }
            function setSucces(input) {
                const inputControl = input.parentElement;
                inputControl.classList = "input-control succes";
            }

            function isValidEmail() {
                const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
                return emailRegex.test(email);
            }
            function showUserInfo() {
                document.getElementById("form").style.display = "none";
                document.getElementsByClassName("userInfo").style.display = "block";
                document.getElementsByClassName("userInfo").innerHTML = `${getCookie("username") + سلام}`;
            }
            function goTo() {
                $("#submit").click(function () {
                    $("form").hide();

                    window.location.replace("/index.html");
                });
            }

            $(".test").text()='hi';
            // query string================================
            // function getParameterByName(name, url = window.location.href) {
            //     name = name.replace(/[\[\]]/g, "\\$&");
            //     var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
            //         results = regex.exec(url);
            //     if (!results) return null;
            //     if (!results[2]) return "";
            //     return decodeURIComponent(results[2].replace(/\+/g, " "));
            // }

            // function updateUrlParameter(param, value) {
            //     var regex = new RegExp("(" + param + "=)[^&]+");
            //     window.location.href = window.location.href.replace(regex, param + "=" + value);

            //     let module = getParameterByName("module");
            //     document.getElementById(index.html.module).style.color = "green";
            //     document.getElementById(`${module}-tab`).style.display = "block";
            // }
        </script>
    </body>
</html>
